<view class="root">
  <van-notice-bar mode="closeable" text="{{text}}" wx:if="{{text!=null}}" />
  <van-search shape="round" input-align="center" value="{{value}}" maxlength="24" placeholder="{{placeHolder}}" bind:search="onSearch" />
  <image class="logo" src="{{logoUrl}}" mode="aspectFit" />
  <van-popup show="{{showPopup}}" position="bottom" bind:touchstart="onTouchStart" bind:touchmove="onTouchMove" bind:touchend="onTouchEnd" bind:close="onPopupClose">
    <van-panel class="panel" title="{{idiName}}{{pinyin}}" use-footer-slot>
      <view class="content">
        <view class="defs" wx:for="{{defs}}" wx:key="{{index}}">
          <van-row style="margin-bottom:5px;">
            <van-col span="6">
              <van-tag mark size="large" color="{{color}}">来源</van-tag>
            </van-col>
            <van-col span="18">
              <text class="text">{{item['source']}}\n</text>
            </van-col>
          </van-row>
          <van-row>
            <van-col span="6">
              <van-tag mark size="large" color="{{color}}">释义</van-tag>
            </van-col>
            <van-col span="18">
              <text class="text" selectable="true" wx:if="{{item['isBold']==true}}" style="font-weight:bold;color:red;">{{item['text']}}\n</text>
              <text class="text" selectable="true" wx:else>{{item['text']}}\n</text>
              <!--条件渲染和列表渲染好像他妈不能一起用，不然结果好像是反的，这里先把条件渲染写block吧-->
              <block wx:if="{{item['examples']!=null}}">
                <text class="text" wx:for="{{item['examples']}}" wx:key="{{index}}" style="margin-top:5px;font-size:12px;color:gray;">{{item}}</text>
              </block>
              <block wx:if="{{item['addition']!=null}}">
                <text class="text" style="margin-top:5px;font-size:12px;color:blue;">{{item['addition']}}</text>
              </block>
            </van-col>
          </van-row>
          <van-divider wx:if="{{index<defs.length-1}}" />
        </view>
      </view>
      <view class="footer" slot="footer">
        <van-button class="btn_func" aria-role="button" aria-label="分享" color="{{color}}" bind:click="onShare">分享</van-button>
      </view>
    </van-panel>
    <van-action-sheet show="{{show}}" actions="{{actions}}" bind:close="onClose" bind:select="onSelect" bind:cancel="onClose" cancel-text="取消" />
  </van-popup>
</view>
<view class="slide" wx:if="{{idiName!=null}}" bind:touchstart="onTouchStart" bind:touchmove="onTouchMove" bind:touchend="onTouchEnd" bind:touchcancel="onTouchCancel">
  <view class="text_bottom">上划查看每日成语</view>
</view>
<canvasdrawer painting="{{painting}}" bind:getImage="eventGetImage" />